import{u as T,U as c,b as g,c as k,d as a,w as l,n as I,W as u,o as M,e as m,q as b,i as f,j as p,s as w,t as v,g as s,h as r,V,f as P,y as U,l as C,_ as B,T as R}from"./Bo5CoKcQ.js";import{V as j,p as S}from"./Br4Uwjbg.js";import{V as q}from"./DTuCxhW3.js";import{V as y}from"./CKBJmRmo.js";import{V as n}from"./DOyOtIE2.js";import"./BHL3FXhg.js";const L={class:"ftext-ht1g text-center"},d=T(),h=c(),E={async mounted(){this.roomId=h.params.id,this.form.roomMateId=h.query.member??null,this.roomData=await d.getRoom(this.roomId),this.roomMates=await d.getRoomMates(this.roomId),this.shareUrl="https://wari.ynetlabo.net/?joinroomid="+this.roomId},data(){return{roomData:null,roomMates:null,shareUrl:void 0,roomId:null,defaultMember:null,form:{roomMateId:"",roomMateIdTo:"",payDate:new Date,payValue:null,payTitle:""},valid:!0,datePicker:!1,rules:{required:i=>!!i||"入力してください"}}},computed:{listRoomMates(){return this.roomMates?this.roomMates:[{title:"ルーム",id:"999999"}]}},methods:{handleBackBtnTap(){window.history.back()},handleCreateBtnTap(){I("./create")},handleDateLabelTap(){this.datePicker=!0},handleDateUpdate(){this.datePicker=!1},async handleSubmit(){if(await this.$refs.form.validate(),this.valid){const i=await d.addPayTransactions(this.roomId,u.DEBIT,this.form.payDate.toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}),this.form.roomMateId,this.form.payValue,this.form.payTitle);await d.addPayTransactions(this.roomId,u.DEBIT,this.form.payDate.toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}),this.form.roomMateIdTo,this.form.payValue*-1,this.form.payTitle,i),window.history.back()}}}},z=Object.assign(E,{__name:"dr-tran",setup(i){return g({title:"レコード DR."}),(e,t)=>{const D=B;return M(),k("div",null,[a(q,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":t[6]||(t[6]=o=>e.valid=o),"lazy-validation":""},{default:l(()=>[a(m,null,{default:l(()=>{var o;return[a(b,{onClick:e.handleBackBtnTap,color:"orange-darken-2","prepend-icon":"mdi-arrow-left",variant:"tonal"},{default:l(()=>[f("戻る")]),_:1},8,["onClick"]),a(D,null,{default:l(()=>[a(p(R),{animationData:p(S),loop:!0,height:100,width:100},null,8,["animationData"])]),_:1}),w("div",L,v((o=e.roomData)==null?void 0:o.roomName)+"に集金を追加する ",1)]}),_:1}),a(m,null,{default:l(()=>[a(s,null,{default:l(()=>[a(r,{cols:"6"},{default:l(()=>[a(y,{modelValue:e.form.roomMateId,"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.roomMateId=o),items:e.listRoomMates,rules:[e.rules.required],"item-value":"id",label:"誰から"},null,8,["modelValue","items","rules"])]),_:1}),a(r,{cols:"6"},{default:l(()=>[a(y,{modelValue:e.form.roomMateIdTo,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.roomMateIdTo=o),items:e.listRoomMates,rules:[e.rules.required],"item-value":"id",label:"誰に"},null,8,["modelValue","items","rules"])]),_:1}),a(r,{cols:"6"},{default:l(()=>[a(n,{onClick:e.handleDateLabelTap,label:"いつ",outlined:"",readonly:"","model-value":e.form.payDate.toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}),rules:[e.rules.required]},null,8,["onClick","model-value","rules"])]),_:1}),a(r,{cols:"6"},{default:l(()=>[a(n,{label:"集金額",outlined:"",class:"right",suffix:"円",type:"number",modelValue:e.form.payValue,"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.payValue=o),rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),a(r,{cols:"12"},{default:l(()=>[a(n,{label:"内容",outlined:"",class:"right",modelValue:e.form.payTitle,"onUpdate:modelValue":t[3]||(t[3]=o=>e.form.payTitle=o)},null,8,["modelValue"])]),_:1})]),_:1}),a(s,null,{default:l(()=>[a(r,{cols:"12"},{default:l(()=>[a(V,{variant:"flat",color:"teal-darken-3",onClick:e.handleSubmit},{default:l(()=>[a(P,null,{default:l(()=>[a(U,{icon:"mdi-cash-plus"}),f("集金を追加する ")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1}),a(s,{justify:"center"},{default:l(()=>[a(C,{modelValue:e.datePicker,"onUpdate:modelValue":t[5]||(t[5]=o=>e.datePicker=o),"close-on-content-click":!1,"full-screen":""},{default:l(()=>[a(V,{class:"d-flex justify-center align-center"},{default:l(()=>[a(j,{modelValue:e.form.payDate,"onUpdate:modelValue":[t[4]||(t[4]=o=>e.form.payDate=o),e.handleDateUpdate]},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{z as default};
